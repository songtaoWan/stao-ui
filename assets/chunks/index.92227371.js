import{u as k,d as b,q as O,v as d,b as v,F,a as y,z as g,B as h,Y as m,m as T,e as $,f as j}from"./framework.da9f7591.js";const z=(a,n)=>{if(a.install=s=>{for(const l of[a,...Object.values(n??{})])s.component(l.name,l)},n)for(const[s,l]of Object.entries(n))a[s]=l;return a},B=a=>($("data-v-0ee75c9c"),a=a(),j(),a),q=["webkitdirectory","multiple","accept"],A=B(()=>F("div",{class:"default_btn"},"选择文件",-1)),E=["onDrop"],P=B(()=>F("div",{class:"default_btn"},"选择文件",-1)),G=k({__name:"FileSelector",props:{webkitdirectory:{type:Boolean,default:!1},accept:{default:""},limit:{default:1},drag:{type:Boolean,default:!1},excessReplace:{type:Boolean,default:!1},size:{},disabled:{type:Boolean,default:!1}},emits:["changeFile","overSize"],setup(a,{expose:n,emit:s}){const l=a,r=(e,t,u)=>!(t&&e.size>t||u&&e.type!==u),o=b(l.disabled);O(()=>l.disabled,e=>{o.value=e});const c=b(null),f=()=>{c.value&&(o.value||c.value.click())},i=b([]),_=e=>{if(!e.length)return;if(l.size&&l.size>0){const u=e.filter(p=>!r(p,l.size));if(u.length){s("overSize",u);return}}const t={singleFile:()=>{l.excessReplace||(o.value=!0),i.value=e,s("changeFile",i.value)},multipleFile:()=>{if(l.limit===1/0){i.value.push(...e),s("changeFile",i.value);return}i.value.length+e.length>=l.limit&&!l.excessReplace&&(o.value=!0);const u=[...i.value,...e];if(l.excessReplace){const p=u.length;u.splice(0,p-l.limit)}else u.splice(l.limit);i.value=u,s("changeFile",i.value)},folder:()=>{o.value=!0,i.value=e,s("changeFile",i.value)}};if(l.webkitdirectory){t.folder();return}if(!l.limit||l.limit===1){t.singleFile();return}t.multipleFile()},D=e=>{!Number.isInteger(e)||e>=i.value.length||(i.value.splice(e,1),o.value&&(o.value=!1),i.value.length||(c.value.value=""))},R=()=>{o.value=!1,i.value=[],c.value.value=""},C=e=>{const t=e.target.files;t&&_(Array.from(t))},I=e=>{const t=e.dataTransfer.files;_(Array.from(t))};return n({onSelectFile:f,deleteFile:D,clearFiles:R,verifyFile:r}),(e,t)=>(d(),v(T,null,[F("input",{ref_key:"fileEle",ref:c,type:"file",name:"files",title:"upload",webkitdirectory:e.webkitdirectory,multiple:e.limit!==void 0&&e.limit>1,accept:e.accept,class:"file_input",onChange:C},null,40,q),!e.drag||e.webkitdirectory?(d(),v("div",{key:0,class:y(["file_btn",o.value?"file_btn--stop":""]),onClick:f},[g(e.$slots,"default",{disabled:o.value},()=>[A],!0)],2)):h("",!0),e.drag&&!e.webkitdirectory?(d(),v("div",{key:1,class:y(["file_btn",o.value?"file_btn--stop":""]),onClick:f,onDragenter:t[0]||(t[0]=m(()=>{},["prevent"])),onDragover:t[1]||(t[1]=m(()=>{},["prevent"])),onDrop:m(I,["prevent"])},[g(e.$slots,"default",{disabled:o.value},()=>[P],!0)],42,E)):h("",!0)],64))}}),w=(a,n)=>{const s=a.__vccOpts||a;for(const[l,r]of n)s[l]=r;return s},S=w(G,[["__scopeId","data-v-0ee75c9c"]]);S.name="STaoFileSelector";const M=z(S),H=k({__name:"SButton",props:{type:{},disabled:{type:Boolean}},setup(a){return(n,s)=>(d(),v("button",{name:"button",type:"button",autocomplete:"off",class:y(["s-button",{"s-button-line":n.type==="line","s-button--disabled":n.disabled}])},[g(n.$slots,"default",{},void 0,!0)],2))}}),x=w(H,[["__scopeId","data-v-08a1ebff"]]);x.name="STaoButton";const N=z(x);export{M as L,N as P};
